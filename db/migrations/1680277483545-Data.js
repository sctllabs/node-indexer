module.exports = class Data1680277483545 {
    name = 'Data1680277483545'

    async up(db) {
        await db.query(`CREATE TABLE "account" ("id" character varying NOT NULL, CONSTRAINT "PK_54115ee388cdb6d86bb4bf5b2ea" PRIMARY KEY ("id"))`)
        await db.query(`CREATE TABLE "fungible_token" ("id" character varying NOT NULL, "name" text NOT NULL, "symbol" text NOT NULL, "decimals" integer, "is_frozen" boolean NOT NULL, "created_at" TIMESTAMP WITH TIME ZONE NOT NULL, "block_hash" text NOT NULL, "block_num" integer NOT NULL, CONSTRAINT "PK_0f4012bbea427b0b644646f67a6" PRIMARY KEY ("id"))`)
        await db.query(`CREATE TABLE "policy" ("id" character varying NOT NULL, "proposal_period" integer NOT NULL, "approve_origin_type" character varying(8) NOT NULL, "approve_origin_proportion" integer array NOT NULL, "governance" jsonb, CONSTRAINT "PK_9917b0c5e4286703cc656b1d39f" PRIMARY KEY ("id"))`)
        await db.query(`CREATE TABLE "council_proposal" ("id" character varying NOT NULL, "index" integer NOT NULL, "hash" text NOT NULL, "vote_threshold" integer NOT NULL, "kind" jsonb NOT NULL, "meta" text, "created_at" TIMESTAMP WITH TIME ZONE NOT NULL, "block_hash" text NOT NULL, "block_num" integer NOT NULL, "status" character varying(11) NOT NULL, "account_id" character varying, "dao_id" character varying, CONSTRAINT "PK_f25908c1312a716ff9924bbae25" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_6b851a80088617ddf427520436" ON "council_proposal" ("account_id") `)
        await db.query(`CREATE INDEX "IDX_bdad68ab86b920268bda2b83fc" ON "council_proposal" ("dao_id") `)
        await db.query(`CREATE TABLE "dao" ("id" character varying NOT NULL, "council" text array NOT NULL, "technical_committee" text array NOT NULL, "name" text NOT NULL, "purpose" text NOT NULL, "metadata" text NOT NULL, "eth_token_address" text, "created_at" TIMESTAMP WITH TIME ZONE NOT NULL, "block_hash" text NOT NULL, "block_num" integer NOT NULL, "account_id" character varying, "founder_id" character varying, "fungible_token_id" character varying, "policy_id" character varying, CONSTRAINT "PK_4daffbc13cc700ca118098230a9" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_16ad258054c1d56a6c552831ec" ON "dao" ("account_id") `)
        await db.query(`CREATE INDEX "IDX_9bcc51bcee2ef61d3eb365e998" ON "dao" ("founder_id") `)
        await db.query(`CREATE INDEX "IDX_a3b741dd3171efe7ff60eeb8c4" ON "dao" ("fungible_token_id") `)
        await db.query(`CREATE INDEX "IDX_97271186a6f3c8f1413ed95567" ON "dao" ("policy_id") `)
        await db.query(`CREATE TABLE "council_vote_history" ("id" character varying NOT NULL, "approved_vote" boolean NOT NULL, "voted_yes" integer, "voted_no" integer, "created_at" TIMESTAMP WITH TIME ZONE NOT NULL, "block_hash" text NOT NULL, "block_num" integer NOT NULL, "proposal_id" character varying, "councillor_id" character varying, CONSTRAINT "PK_edf030673d5c148144ca1ce6b01" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_2e09a2bea3010f114a9d3b9f3b" ON "council_vote_history" ("proposal_id") `)
        await db.query(`CREATE INDEX "IDX_9e9da61d7aa4c2f4730e4fb14d" ON "council_vote_history" ("councillor_id") `)
        await db.query(`CREATE TABLE "democracy_proposal" ("id" character varying NOT NULL, "index" integer NOT NULL, "deposit" numeric NOT NULL, "kind" jsonb NOT NULL, "meta" text, "created_at" TIMESTAMP WITH TIME ZONE NOT NULL, "block_hash" text NOT NULL, "block_num" integer NOT NULL, "status" character varying(10) NOT NULL, "account_id" character varying, "dao_id" character varying, CONSTRAINT "PK_7a1e958ebe21dca11725bcd7e3c" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_c5bb5f5984f0ddda861e2c09c8" ON "democracy_proposal" ("account_id") `)
        await db.query(`CREATE INDEX "IDX_0e352b9311fdb8df4181a09091" ON "democracy_proposal" ("dao_id") `)
        await db.query(`CREATE TABLE "democracy_second" ("id" character varying NOT NULL, "count" integer NOT NULL, "seconder_id" character varying, "proposal_id" character varying, CONSTRAINT "PK_62f2f691353c1b10f902b78bd0c" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_f2d3526fcd70e1cc75d18d61b1" ON "democracy_second" ("seconder_id") `)
        await db.query(`CREATE INDEX "IDX_d4f5ccf634aabbf7bd16002ec1" ON "democracy_second" ("proposal_id") `)
        await db.query(`CREATE TABLE "democracy_referendum" ("id" character varying NOT NULL, "vote_threshold" character varying(20) NOT NULL, "status" character varying(9) NOT NULL, "index" integer NOT NULL, "democracy_proposal_id" character varying, CONSTRAINT "PK_14e3134574e536d81ddc90d4a18" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_a0f6113a7425e2b37295cac10e" ON "democracy_referendum" ("democracy_proposal_id") `)
        await db.query(`CREATE TABLE "democracy_delegation" ("id" character varying NOT NULL, "account_id" character varying, "target_id" character varying, CONSTRAINT "PK_852759ccbd096550a4571725498" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_5a74136a948246f86214372008" ON "democracy_delegation" ("account_id") `)
        await db.query(`CREATE INDEX "IDX_9142099c55927feb7648283a1e" ON "democracy_delegation" ("target_id") `)
        await db.query(`ALTER TABLE "council_proposal" ADD CONSTRAINT "FK_6b851a80088617ddf4275204362" FOREIGN KEY ("account_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "council_proposal" ADD CONSTRAINT "FK_bdad68ab86b920268bda2b83fc2" FOREIGN KEY ("dao_id") REFERENCES "dao"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "dao" ADD CONSTRAINT "FK_16ad258054c1d56a6c552831ec3" FOREIGN KEY ("account_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "dao" ADD CONSTRAINT "FK_9bcc51bcee2ef61d3eb365e998e" FOREIGN KEY ("founder_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "dao" ADD CONSTRAINT "FK_a3b741dd3171efe7ff60eeb8c4e" FOREIGN KEY ("fungible_token_id") REFERENCES "fungible_token"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "dao" ADD CONSTRAINT "FK_97271186a6f3c8f1413ed955678" FOREIGN KEY ("policy_id") REFERENCES "policy"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "council_vote_history" ADD CONSTRAINT "FK_2e09a2bea3010f114a9d3b9f3bf" FOREIGN KEY ("proposal_id") REFERENCES "council_proposal"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "council_vote_history" ADD CONSTRAINT "FK_9e9da61d7aa4c2f4730e4fb14d9" FOREIGN KEY ("councillor_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "democracy_proposal" ADD CONSTRAINT "FK_c5bb5f5984f0ddda861e2c09c87" FOREIGN KEY ("account_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "democracy_proposal" ADD CONSTRAINT "FK_0e352b9311fdb8df4181a090911" FOREIGN KEY ("dao_id") REFERENCES "dao"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "democracy_second" ADD CONSTRAINT "FK_f2d3526fcd70e1cc75d18d61b13" FOREIGN KEY ("seconder_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "democracy_second" ADD CONSTRAINT "FK_d4f5ccf634aabbf7bd16002ec17" FOREIGN KEY ("proposal_id") REFERENCES "democracy_proposal"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "democracy_referendum" ADD CONSTRAINT "FK_a0f6113a7425e2b37295cac10ee" FOREIGN KEY ("democracy_proposal_id") REFERENCES "democracy_proposal"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "democracy_delegation" ADD CONSTRAINT "FK_5a74136a948246f86214372008a" FOREIGN KEY ("account_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "democracy_delegation" ADD CONSTRAINT "FK_9142099c55927feb7648283a1e1" FOREIGN KEY ("target_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    }

    async down(db) {
        await db.query(`DROP TABLE "account"`)
        await db.query(`DROP TABLE "fungible_token"`)
        await db.query(`DROP TABLE "policy"`)
        await db.query(`DROP TABLE "council_proposal"`)
        await db.query(`DROP INDEX "public"."IDX_6b851a80088617ddf427520436"`)
        await db.query(`DROP INDEX "public"."IDX_bdad68ab86b920268bda2b83fc"`)
        await db.query(`DROP TABLE "dao"`)
        await db.query(`DROP INDEX "public"."IDX_16ad258054c1d56a6c552831ec"`)
        await db.query(`DROP INDEX "public"."IDX_9bcc51bcee2ef61d3eb365e998"`)
        await db.query(`DROP INDEX "public"."IDX_a3b741dd3171efe7ff60eeb8c4"`)
        await db.query(`DROP INDEX "public"."IDX_97271186a6f3c8f1413ed95567"`)
        await db.query(`DROP TABLE "council_vote_history"`)
        await db.query(`DROP INDEX "public"."IDX_2e09a2bea3010f114a9d3b9f3b"`)
        await db.query(`DROP INDEX "public"."IDX_9e9da61d7aa4c2f4730e4fb14d"`)
        await db.query(`DROP TABLE "democracy_proposal"`)
        await db.query(`DROP INDEX "public"."IDX_c5bb5f5984f0ddda861e2c09c8"`)
        await db.query(`DROP INDEX "public"."IDX_0e352b9311fdb8df4181a09091"`)
        await db.query(`DROP TABLE "democracy_second"`)
        await db.query(`DROP INDEX "public"."IDX_f2d3526fcd70e1cc75d18d61b1"`)
        await db.query(`DROP INDEX "public"."IDX_d4f5ccf634aabbf7bd16002ec1"`)
        await db.query(`DROP TABLE "democracy_referendum"`)
        await db.query(`DROP INDEX "public"."IDX_a0f6113a7425e2b37295cac10e"`)
        await db.query(`DROP TABLE "democracy_delegation"`)
        await db.query(`DROP INDEX "public"."IDX_5a74136a948246f86214372008"`)
        await db.query(`DROP INDEX "public"."IDX_9142099c55927feb7648283a1e"`)
        await db.query(`ALTER TABLE "council_proposal" DROP CONSTRAINT "FK_6b851a80088617ddf4275204362"`)
        await db.query(`ALTER TABLE "council_proposal" DROP CONSTRAINT "FK_bdad68ab86b920268bda2b83fc2"`)
        await db.query(`ALTER TABLE "dao" DROP CONSTRAINT "FK_16ad258054c1d56a6c552831ec3"`)
        await db.query(`ALTER TABLE "dao" DROP CONSTRAINT "FK_9bcc51bcee2ef61d3eb365e998e"`)
        await db.query(`ALTER TABLE "dao" DROP CONSTRAINT "FK_a3b741dd3171efe7ff60eeb8c4e"`)
        await db.query(`ALTER TABLE "dao" DROP CONSTRAINT "FK_97271186a6f3c8f1413ed955678"`)
        await db.query(`ALTER TABLE "council_vote_history" DROP CONSTRAINT "FK_2e09a2bea3010f114a9d3b9f3bf"`)
        await db.query(`ALTER TABLE "council_vote_history" DROP CONSTRAINT "FK_9e9da61d7aa4c2f4730e4fb14d9"`)
        await db.query(`ALTER TABLE "democracy_proposal" DROP CONSTRAINT "FK_c5bb5f5984f0ddda861e2c09c87"`)
        await db.query(`ALTER TABLE "democracy_proposal" DROP CONSTRAINT "FK_0e352b9311fdb8df4181a090911"`)
        await db.query(`ALTER TABLE "democracy_second" DROP CONSTRAINT "FK_f2d3526fcd70e1cc75d18d61b13"`)
        await db.query(`ALTER TABLE "democracy_second" DROP CONSTRAINT "FK_d4f5ccf634aabbf7bd16002ec17"`)
        await db.query(`ALTER TABLE "democracy_referendum" DROP CONSTRAINT "FK_a0f6113a7425e2b37295cac10ee"`)
        await db.query(`ALTER TABLE "democracy_delegation" DROP CONSTRAINT "FK_5a74136a948246f86214372008a"`)
        await db.query(`ALTER TABLE "democracy_delegation" DROP CONSTRAINT "FK_9142099c55927feb7648283a1e1"`)
    }
}
