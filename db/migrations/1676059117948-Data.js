module.exports = class Data1676059117948 {
    name = 'Data1676059117948'

    async up(db) {
        await db.query(`CREATE TABLE "technical_committee_accounts" ("id" character varying NOT NULL, "account_id" character varying, "dao_id" character varying, CONSTRAINT "PK_62b7c8bb6752a438983e0ae67c7" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_f48c3433495e26032f34681f5f" ON "technical_committee_accounts" ("account_id") `)
        await db.query(`CREATE INDEX "IDX_8f4272d304aeb9e504cb150fbc" ON "technical_committee_accounts" ("dao_id") `)
        await db.query(`CREATE TABLE "fungible_token" ("id" character varying NOT NULL, "name" text NOT NULL, "symbol" text NOT NULL, "decimals" integer, "is_frozen" boolean NOT NULL, CONSTRAINT "PK_0f4012bbea427b0b644646f67a6" PRIMARY KEY ("id"))`)
        await db.query(`CREATE TABLE "policy" ("id" character varying NOT NULL, "proposal_period" integer NOT NULL, "approve_origin_type" character varying(8) NOT NULL, "approve_origin_proportion" integer array NOT NULL, "governance" jsonb, CONSTRAINT "PK_9917b0c5e4286703cc656b1d39f" PRIMARY KEY ("id"))`)
        await db.query(`CREATE TABLE "proposal" ("id" character varying NOT NULL, "index" text NOT NULL, "hash" text NOT NULL, "account" text NOT NULL, "vote_threshold" integer NOT NULL, "kind" jsonb NOT NULL, "meta" text, "dao_id" character varying, CONSTRAINT "PK_ca872ecfe4fef5720d2d39e4275" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_f0dcd6b4180adeafcf5bf2cc8c" ON "proposal" ("dao_id") `)
        await db.query(`CREATE TABLE "dao" ("id" character varying NOT NULL, "name" text NOT NULL, "purpose" text NOT NULL, "metadata" text NOT NULL, "eth_token_address" text, "account_id" character varying, "founder_id" character varying, "fungible_token_id" character varying, "policy_id" character varying, CONSTRAINT "PK_4daffbc13cc700ca118098230a9" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_16ad258054c1d56a6c552831ec" ON "dao" ("account_id") `)
        await db.query(`CREATE INDEX "IDX_9bcc51bcee2ef61d3eb365e998" ON "dao" ("founder_id") `)
        await db.query(`CREATE INDEX "IDX_a3b741dd3171efe7ff60eeb8c4" ON "dao" ("fungible_token_id") `)
        await db.query(`CREATE INDEX "IDX_97271186a6f3c8f1413ed95567" ON "dao" ("policy_id") `)
        await db.query(`CREATE TABLE "council_accounts" ("id" character varying NOT NULL, "account_id" character varying, "dao_id" character varying, CONSTRAINT "PK_1e8e7f8d7d7892039f6841819fa" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_626493600dd8b281247e9cab26" ON "council_accounts" ("account_id") `)
        await db.query(`CREATE INDEX "IDX_25445c93a23970079763d17596" ON "council_accounts" ("dao_id") `)
        await db.query(`CREATE TABLE "account" ("id" character varying NOT NULL, CONSTRAINT "PK_54115ee388cdb6d86bb4bf5b2ea" PRIMARY KEY ("id"))`)
        await db.query(`CREATE TABLE "vote_history" ("id" character varying NOT NULL, "approved_vote" boolean NOT NULL, "voted_yes" integer, "voted_no" integer, "block" numeric NOT NULL, "proposal_hash_id" character varying, "councillor_id" character varying, CONSTRAINT "PK_e17854d4623d6d69edbe4b25a96" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_549d763218741200867a8b15ba" ON "vote_history" ("proposal_hash_id") `)
        await db.query(`CREATE INDEX "IDX_6d27d26c7d6bb3a618ee32b41b" ON "vote_history" ("councillor_id") `)
        await db.query(`ALTER TABLE "technical_committee_accounts" ADD CONSTRAINT "FK_f48c3433495e26032f34681f5fe" FOREIGN KEY ("account_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "technical_committee_accounts" ADD CONSTRAINT "FK_8f4272d304aeb9e504cb150fbc1" FOREIGN KEY ("dao_id") REFERENCES "dao"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "proposal" ADD CONSTRAINT "FK_f0dcd6b4180adeafcf5bf2cc8c1" FOREIGN KEY ("dao_id") REFERENCES "dao"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "dao" ADD CONSTRAINT "FK_16ad258054c1d56a6c552831ec3" FOREIGN KEY ("account_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "dao" ADD CONSTRAINT "FK_9bcc51bcee2ef61d3eb365e998e" FOREIGN KEY ("founder_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "dao" ADD CONSTRAINT "FK_a3b741dd3171efe7ff60eeb8c4e" FOREIGN KEY ("fungible_token_id") REFERENCES "fungible_token"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "dao" ADD CONSTRAINT "FK_97271186a6f3c8f1413ed955678" FOREIGN KEY ("policy_id") REFERENCES "policy"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "council_accounts" ADD CONSTRAINT "FK_626493600dd8b281247e9cab26d" FOREIGN KEY ("account_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "council_accounts" ADD CONSTRAINT "FK_25445c93a23970079763d175961" FOREIGN KEY ("dao_id") REFERENCES "dao"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "vote_history" ADD CONSTRAINT "FK_549d763218741200867a8b15ba0" FOREIGN KEY ("proposal_hash_id") REFERENCES "proposal"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "vote_history" ADD CONSTRAINT "FK_6d27d26c7d6bb3a618ee32b41b4" FOREIGN KEY ("councillor_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    }

    async down(db) {
        await db.query(`DROP TABLE "technical_committee_accounts"`)
        await db.query(`DROP INDEX "public"."IDX_f48c3433495e26032f34681f5f"`)
        await db.query(`DROP INDEX "public"."IDX_8f4272d304aeb9e504cb150fbc"`)
        await db.query(`DROP TABLE "fungible_token"`)
        await db.query(`DROP TABLE "policy"`)
        await db.query(`DROP TABLE "proposal"`)
        await db.query(`DROP INDEX "public"."IDX_f0dcd6b4180adeafcf5bf2cc8c"`)
        await db.query(`DROP TABLE "dao"`)
        await db.query(`DROP INDEX "public"."IDX_16ad258054c1d56a6c552831ec"`)
        await db.query(`DROP INDEX "public"."IDX_9bcc51bcee2ef61d3eb365e998"`)
        await db.query(`DROP INDEX "public"."IDX_a3b741dd3171efe7ff60eeb8c4"`)
        await db.query(`DROP INDEX "public"."IDX_97271186a6f3c8f1413ed95567"`)
        await db.query(`DROP TABLE "council_accounts"`)
        await db.query(`DROP INDEX "public"."IDX_626493600dd8b281247e9cab26"`)
        await db.query(`DROP INDEX "public"."IDX_25445c93a23970079763d17596"`)
        await db.query(`DROP TABLE "account"`)
        await db.query(`DROP TABLE "vote_history"`)
        await db.query(`DROP INDEX "public"."IDX_549d763218741200867a8b15ba"`)
        await db.query(`DROP INDEX "public"."IDX_6d27d26c7d6bb3a618ee32b41b"`)
        await db.query(`ALTER TABLE "technical_committee_accounts" DROP CONSTRAINT "FK_f48c3433495e26032f34681f5fe"`)
        await db.query(`ALTER TABLE "technical_committee_accounts" DROP CONSTRAINT "FK_8f4272d304aeb9e504cb150fbc1"`)
        await db.query(`ALTER TABLE "proposal" DROP CONSTRAINT "FK_f0dcd6b4180adeafcf5bf2cc8c1"`)
        await db.query(`ALTER TABLE "dao" DROP CONSTRAINT "FK_16ad258054c1d56a6c552831ec3"`)
        await db.query(`ALTER TABLE "dao" DROP CONSTRAINT "FK_9bcc51bcee2ef61d3eb365e998e"`)
        await db.query(`ALTER TABLE "dao" DROP CONSTRAINT "FK_a3b741dd3171efe7ff60eeb8c4e"`)
        await db.query(`ALTER TABLE "dao" DROP CONSTRAINT "FK_97271186a6f3c8f1413ed955678"`)
        await db.query(`ALTER TABLE "council_accounts" DROP CONSTRAINT "FK_626493600dd8b281247e9cab26d"`)
        await db.query(`ALTER TABLE "council_accounts" DROP CONSTRAINT "FK_25445c93a23970079763d175961"`)
        await db.query(`ALTER TABLE "vote_history" DROP CONSTRAINT "FK_549d763218741200867a8b15ba0"`)
        await db.query(`ALTER TABLE "vote_history" DROP CONSTRAINT "FK_6d27d26c7d6bb3a618ee32b41b4"`)
    }
}
